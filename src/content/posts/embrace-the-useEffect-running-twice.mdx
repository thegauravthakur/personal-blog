---
title: Embrace the effects running twice in React 18
publishedDate: 05/15/2022
author: Gaurav Thakur
tags: JavaScript
description:
    It is quite common for JavaScript developers to find this keyword to be confusing and understand it incorrectly.
    To get the expected results, developers make random guesses and do hit and trial. In this article, we'll discuss how
    JavaScript determines the value of this keyword
metaDescription:
    It is quite common for JavaScript developers to find this keyword to be confusing and understand it incorrectly. Let's
    learn how JavaScript determines the value of this keyword
---

As per the React [documentation](https://reactjs.org/docs/strict-mode.html#ensuring-reusable-state), whenever a
component mounts for the first time, React will unmount and mount it again. It is important to note that this behavior
only occurs in development with the strict mode on. In production, all components will be mounted only once.

```javascript
export default function App() {
    useLayoutEffect(() => {
        console.log('useLayoutEffect: effect called');
    }, []);

    useEffect(() => {
        console.log('useEffect: effect called');
    }, []);

  return (
      <div>
        <p>hello world</p>
      </div>
  );
}
```

Due to this behavior, all the effects (`useEffect` and `useLayoutEffect`) will run twice. Running the above component
in React 18 will display the below results

![console output with effect called twice + `{"width":965,"height":506}`](/images/console-output-with-effect-called-twice.png 'console output with effect called twice')

In the beginning, it may seem like an odd behavior from React, but later in the post we will explore the reason behind
it and why we should embrace it rather than consider it a bug.

So far, we have created a mental model that an empty dependency array will only run the effect once. It becomes a
problem when we write effects in such a way that calling them twice with the same values breaks the application or causes
a bug. With the help of Strict mode, the React team is trying to identify these issues early in development.

In your mind you may think, "this is specific to stick mode, and if we opt out of stick mode then we don't need to worry
about how effect reacts to multiple calls because empty dependencies will invoke effect only once". In fact,
this scenario is very likely to occur even if the strict mode is removed.

Consider a scenario in which the user clicks on a link and then returns to the original screen immediately.
In this case, the component will first mount, and then as the user navigates to another screen, it will unmount, and
when the user returns to the original screen, it will mount again.
